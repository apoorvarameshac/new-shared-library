@Library('common-lib@main') _

pipeline {
    agent any
    
    stages {
        
	stage('Build Docker Image') {
            steps {
                script {
                    // Use shared library step
                    builtImage = buildImage()
                }
            }
        }

        stage('Test In Container') {
            steps {
                script {
                    testImage(builtImage)
                }
            }
        }

        stage('Deploy Container') {
            steps {
                deployContainer()
            }
        }
    }
}

